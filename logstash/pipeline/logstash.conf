input {
  file {
    path => "/logs/application-*.log"  # Ensure this path matches the location of your log files
    start_position => "beginning"       # Start reading from the beginning for new files
    sincedb_path => "/dev/null"         # Use this for testing to prevent Logstash from remembering file positions
    codec => "json"                     # Use JSON codec if your logs are in JSON format
  }
}

filter {
  json {
    source => "message"                 # Parse the message field as JSON
  }

  mutate {
    rename => { "timestamp" => "@timestamp" }  # Rename timestamp to @timestamp for Elasticsearch compatibility
  }
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "application-logs"                # Make sure this is the index name you want in Elasticsearch
  }

  stdout { codec => rubydebug }                 # Optional: Print to console for debugging
}
